<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXMO GAME - Spinning Wheel + Clicker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* VARIABLES */
        :root {
            --primary: #2d3436;
            --secondary: #636e72;
            --accent: #e74c3c;
            --accent-light: #ff7675;
            --light: #f5f6fa;
            --dark: #1a1a2e;
            --gold: #fdcb6e;
            --silver: #b2bec3;
            --bronze: #e17055;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #d63031;
            --info: #0984e3;
            --shadow: 0 10px 20px rgba(0,0,0,0.1);
            --radius: 12px;
            --transition: all 0.3s ease;
        }

        /* RESET & BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* HEADER */
        .header {
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .logo-text h1 {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(45deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .logo-text span {
            font-size: 12px;
            color: var(--silver);
        }

        /* USER INFO */
        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .currency {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 20px;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .currency.coin .currency-icon {
            color: var(--gold);
        }

        .currency.axmo .currency-icon {
            color: var(--info);
        }

        .currency-icon {
            font-size: 20px;
        }

        .currency-value {
            font-weight: 600;
            font-size: 18px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .user-level {
            font-size: 12px;
            color: var(--silver);
        }

        /* NAVIGATION */
        .nav {
            background: rgba(26, 26, 46, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 0;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            text-decoration: none;
            color: var(--silver);
            font-weight: 500;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-link.active {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2), rgba(255, 118, 117, 0.2));
            color: var(--accent-light);
            border-color: rgba(231, 76, 60, 0.3);
        }

        .nav-link i {
            font-size: 18px;
        }

        /* PAGES */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
            min-height: calc(100vh - 140px);
            padding: 30px 0;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* AUTH PAGE */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .auth-tabs {
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 5px;
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            border-radius: 20px;
            color: var(--silver);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .auth-tab.active {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--silver);
            font-size: 14px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-size: 16px;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }

        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            outline: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #00cec9);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e17055);
            color: #2d3436;
        }

        .btn-block {
            width: 100%;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* MAIN MENU */
        .main-menu {
            text-align: center;
        }

        .menu-title {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .menu-subtitle {
            color: var(--silver);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .menu-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 30px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .menu-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
        }

        .menu-icon {
            font-size: 60px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .menu-card h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: white;
        }

        .menu-card p {
            color: var(--silver);
            margin-bottom: 20px;
            font-size: 14px;
        }

        /* SPINNING WHEEL */
        .wheel-section {
            text-align: center;
        }

        .wheel-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .wheel-subtitle {
            color: var(--silver);
            margin-bottom: 30px;
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 30px auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 15px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                inset 0 0 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(231, 76, 60, 0.3);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        }

        .wheel-section-part {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .wheel-center {
            position: absolute;
            width: 70px;
            height: 70px;
            background: var(--dark);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            border: 5px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        }

        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            font-size: 50px;
            color: var(--accent);
            filter: drop-shadow(0 0 10px rgba(231, 76, 60, 0.8));
        }

        .spin-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 30px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .spin-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .spin-stat {
            text-align: center;
        }

        .spin-stat h4 {
            color: var(--silver);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .spin-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        /* CLICKER GAME */
        .clicker-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .clicker-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .clicker-stat h4 {
            color: var(--silver);
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .clicker-stat-value {
            font-size: 32px;
            font-weight: 700;
            color: white;
        }

        .coin-container {
            text-align: center;
            margin: 40px 0;
        }

        .coin {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle at 30% 30%, var(--gold), #e6b800);
            border-radius: 50%;
            margin: 0 auto 20px;
            cursor: pointer;
            position: relative;
            box-shadow: 
                0 0 60px rgba(253, 203, 110, 0.5),
                inset 0 -10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .coin:active {
            transform: scale(0.95);
        }

        .coin-inner {
            width: 160px;
            height: 160px;
            background: radial-gradient(circle at 40% 40%, #ffeaa7, #e6b800);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: rgba(0, 0, 0, 0.8);
            font-weight: bold;
        }

        .pets-section, .upgrades-section {
            margin-top: 40px;
        }

        .section-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: white;
        }

        .pets-grid, .upgrades-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .pet-card, .upgrade-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
        }

        .pet-card:hover, .upgrade-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
        }

        .pet-icon, .upgrade-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .pet-icon {
            color: var(--info);
        }

        .upgrade-icon {
            color: var(--warning);
        }

        .pet-name, .upgrade-name {
            font-size: 20px;
            margin-bottom: 10px;
            color: white;
        }

        .pet-info, .upgrade-info {
            color: var(--silver);
            font-size: 14px;
            margin-bottom: 15px;
        }

        /* LEADERBOARD */
        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .leaderboard-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            color: var(--silver);
            cursor: pointer;
            transition: var(--transition);
        }

        .leaderboard-tab.active {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            border-color: transparent;
        }

        .leaderboard-table {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .leaderboard-table th {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            text-align: left;
            color: white;
            font-weight: 600;
        }

        .leaderboard-table td {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .leaderboard-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .rank-1 { color: var(--gold); font-weight: bold; }
        .rank-2 { color: var(--silver); font-weight: bold; }
        .rank-3 { color: var(--bronze); font-weight: bold; }

        /* PROFILE */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-avatar-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            flex-shrink: 0;
        }

        .profile-info h2 {
            font-size: 32px;
            margin-bottom: 10px;
            color: white;
        }

        .profile-info p {
            color: var(--silver);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .profile-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-stat h4 {
            color: var(--silver);
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .profile-stat-value {
            font-size: 36px;
            font-weight: 700;
            color: white;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: var(--shadow);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--silver);
            font-size: 24px;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: white;
        }

        .modal-icon {
            font-size: 80px;
            text-align: center;
            margin-bottom: 20px;
            color: var(--gold);
        }

        .modal-title {
            font-size: 32px;
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }

        .modal-text {
            text-align: center;
            color: var(--silver);
            margin-bottom: 30px;
        }

        /* CHAT */
        .chat-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(231, 76, 60, 0.4);
            transition: var(--transition);
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        .chat-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius);
            display: flex;
            flex-direction: column;
            z-index: 101;
            box-shadow: var(--shadow);
            display: none;
        }

        .chat-container.active {
            display: flex;
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            color: white;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            max-width: 80%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message.own {
            align-self: flex-end;
            background: rgba(231, 76, 60, 0.2);
            border-color: rgba(231, 76, 60, 0.3);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: var(--silver);
        }

        .message-content {
            word-wrap: break-word;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            color: white;
            outline: none;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .user-info {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .wheel-container {
                width: 300px;
                height: 300px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .chat-container {
                width: calc(100% - 40px);
                height: 60vh;
                bottom: 20px;
                right: 20px;
                left: 20px;
            }
            
            .chat-toggle {
                bottom: 20px;
                right: 20px;
            }
        }

        /* UTILITIES */
        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 10px; }
        .mb-2 { margin-bottom: 20px; }
        .mb-3 { margin-bottom: 30px; }
        .mt-1 { margin-top: 10px; }
        .mt-2 { margin-top: 20px; }
        .mt-3 { margin-top: 30px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container header-content">
            <div class="logo" onclick="showPage('main-menu')">
                <div class="logo-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="logo-text">
                    <h1>AXMO GAME</h1>
                    <span>Spin • Click • Win</span>
                </div>
            </div>
            
            <div class="user-info" id="userInfo">
                <div class="currency coin">
                    <i class="fas fa-coins currency-icon"></i>
                    <span class="currency-value" id="coinCount">0</span>
                </div>
                <div class="currency axmo">
                    <i class="fas fa-gem currency-icon"></i>
                    <span class="currency-value" id="axmoCount">0</span>
                </div>
                <div class="user-profile" onclick="showPage('profile')">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Guest</span>
                        <span class="user-level">Level <span id="userLevel">1</span></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- NAVIGATION -->
    <nav class="nav">
        <div class="container nav-links" id="navLinks">
            <a href="#" class="nav-link" onclick="showPage('main-menu')">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="#" class="nav-link" onclick="showPage('spinning-wheel')">
                <i class="fas fa-sync-alt"></i> Spinning Wheel
            </a>
            <a href="#" class="nav-link" onclick="showPage('clicker')">
                <i class="fas fa-coins"></i> Axmo Clicker
            </a>
            <a href="#" class="nav-link" onclick="showPage('leaderboard')">
                <i class="fas fa-trophy"></i> Leaderboard
            </a>
            <a href="#" class="nav-link" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="container">
        <!-- AUTH PAGE -->
        <div class="page active" id="auth-page">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                        <button class="auth-tab" onclick="switchAuthTab('register')">Register</button>
                    </div>
                    
                    <form id="loginForm" class="auth-form active" onsubmit="login(event)">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                    
                    <form id="registerForm" class="auth-form" onsubmit="register(event)">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="registerUsername" class="form-input" placeholder="Choose username" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="registerPassword" class="form-input" placeholder="Minimum 6 characters" minlength="6" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- MAIN MENU -->
        <div class="page" id="main-menu">
            <div class="main-menu">
                <h1 class="menu-title">Welcome to AXMO Game</h1>
                <p class="menu-subtitle">Spin the wheel, click coins, collect pets, and compete with other players!</p>
                
                <div class="menu-grid">
                    <div class="menu-card" onclick="showPage('spinning-wheel')">
                        <div class="menu-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h3>Spinning Wheel</h3>
                        <p>Spin the wheel for amazing prizes, buffs, and special rewards</p>
                        <button class="btn btn-secondary">Play Now</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('clicker')">
                        <div class="menu-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <h3>Axmo Clicker</h3>
                        <p>Click coins, buy pets, upgrade your bag, and build your coin empire</p>
                        <button class="btn btn-secondary">Start Clicking</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('leaderboard')">
                        <div class="menu-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3>Leaderboard</h3>
                        <p>See who's the richest and most skilled player in the game</p>
                        <button class="btn btn-secondary">View Rankings</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('profile')">
                        <div class="menu-icon">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>My Profile</h3>
                        <p>Check your stats, achievements, and game progress</p>
                        <button class="btn btn-secondary">View Profile</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SPINNING WHEEL -->
        <div class="page" id="spinning-wheel">
            <div class="wheel-section">
                <h2 class="wheel-title">Spinning Wheel</h2>
                <p class="wheel-subtitle">Spin the wheel and win amazing prizes! Each spin costs 1 Axmo (100 coins)</p>
                
                <div class="wheel-container">
                    <div class="wheel-pointer">
                        <i class="fas fa-caret-down"></i>
                    </div>
                    <div class="wheel" id="wheel">
                        <!-- Wheel will be generated by JS -->
                    </div>
                    <div class="wheel-center">
                        SPIN
                    </div>
                </div>
                
                <div class="spin-info">
                    <div class="spin-stats">
                        <div class="spin-stat">
                            <h4>Your Axmo</h4>
                            <div class="spin-stat-value" id="currentAxmo">0</div>
                        </div>
                        <div class="spin-stat">
                            <h4>Free Spin In</h4>
                            <div class="spin-stat-value" id="spinTimer">5:00</div>
                        </div>
                        <div class="spin-stat">
                            <h4>Total Spins</h4>
                            <div class="spin-stat-value" id="totalSpins">0</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary btn-block" id="spinButton" onclick="spinWheel()">
                        <i class="fas fa-sync-alt"></i> Spin Wheel (1 Axmo)
                    </button>
                    
                    <p class="text-center mt-2">Next free spin in <span id="nextSpinTime">5:00</span> minutes</p>
                </div>
            </div>
        </div>

        <!-- CLICKER GAME -->
        <div class="page" id="clicker">
            <div class="clicker-container">
                <h2 class="wheel-title">Axmo Clicker</h2>
                <p class="wheel-subtitle mb-3">Click the coin to earn coins, buy pets, and upgrade your equipment!</p>
                
                <div class="clicker-header">
                    <div class="clicker-stat">
                        <h4>Coins Per Second</h4>
                        <div class="clicker-stat-value" id="cps">0</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Click Multiplier</h4>
                        <div class="clicker-stat-value" id="clickMultiplier">1x</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Pets Owned</h4>
                        <div class="clicker-stat-value" id="petsCount">0/4</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Pet Level</h4>
                        <div class="clicker-stat-value" id="petLevel">1</div>
                    </div>
                </div>
                
                <div class="coin-container">
                    <div class="coin" onclick="clickCoin()">
                        <div class="coin-inner">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    <p>Click the coin to earn coins! <span id="clickValue">+1</span> per click</p>
                </div>
                
                <div class="pets-section">
                    <h3 class="section-title"><i class="fas fa-paw"></i> Pets</h3>
                    <p class="wheel-subtitle">Pets automatically generate coins every second</p>
                    <div class="pets-grid" id="petsGrid">
                        <!-- Pets will be loaded here -->
                    </div>
                </div>
                
                <div class="upgrades-section">
                    <h3 class="section-title"><i class="fas fa-arrow-up"></i> Upgrades</h3>
                    <p class="wheel-subtitle">Upgrade your equipment to boost your earnings</p>
                    <div class="upgrades-grid">
                        <div class="upgrade-card">
                            <div class="upgrade-icon">
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <h4 class="upgrade-name">Bag Upgrade</h4>
                            <p class="upgrade-info">
                                Increase pet capacity from <span id="currentBagSize">4</span> to <span id="nextBagSize">8</span>
                            </p>
                            <p class="mb-2"><strong>Cost: <span id="bagUpgradeCost">200</span> coins</strong></p>
                            <button class="btn btn-warning btn-block" onclick="upgradeBag()" id="bagUpgradeBtn">
                                Upgrade Bag
                            </button>
                        </div>
                        
                        <div class="upgrade-card">
                            <div class="upgrade-icon">
                                <i class="fas fa-level-up-alt"></i>
                            </div>
                            <h4 class="upgrade-name">Pet Upgrade</h4>
                            <p class="upgrade-info">
                                Increase production of all pets by 3x
                            </p>
                            <p class="mb-2"><strong>Cost: <span id="petUpgradeCost">30</span> coins</strong></p>
                            <button class="btn btn-success btn-block" onclick="upgradePets()" id="petUpgradeBtn">
                                Upgrade Pets
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEADERBOARD -->
        <div class="page" id="leaderboard">
            <div class="wheel-section">
                <h2 class="wheel-title">Leaderboard</h2>
                <p class="wheel-subtitle">See how you rank against other players!</p>
                
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" onclick="loadLeaderboard('coins')">
                        <i class="fas fa-coins"></i> Most Coins
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('axmo')">
                        <i class="fas fa-gem"></i> Most Axmo
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('spins')">
                        <i class="fas fa-sync-alt"></i> Most Spins
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('pets')">
                        <i class="fas fa-paw"></i> Most Pets
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('time')">
                        <i class="fas fa-clock"></i> Most Play Time
                    </button>
                </div>
                
                <div class="table-responsive">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th id="leaderboardColumn">Coins</th>
                                <th>Level</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PROFILE -->
        <div class="page" id="profile">
            <div class="wheel-section">
                <div class="profile-header">
                    <div class="profile-avatar-large">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName">Guest</h2>
                        <p><i class="fas fa-envelope"></i> <span id="profileEmail">guest@example.com</span></p>
                        <p><i class="fas fa-calendar"></i> Joined <span id="profileJoinDate">Today</span></p>
                        <p><i class="fas fa-clock"></i> Play Time: <span id="profileTime">0h 0m</span></p>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <h4>Total Coins</h4>
                        <div class="profile-stat-value" id="profileCoins">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Axmo</h4>
                        <div class="profile-stat-value" id="profileAxmo">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Spins</h4>
                        <div class="profile-stat-value" id="profileSpins">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Pets</h4>
                        <div class="profile-stat-value" id="profilePets">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Bag Capacity</h4>
                        <div class="profile-stat-value" id="profileBag">4</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Player Level</h4>
                        <div class="profile-stat-value" id="profileLevel">1</div>
                    </div>
                </div>
                
                <div class="mt-3">
                    <h3 class="section-title">Achievements</h3>
                    <div id="achievementsList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <!-- Achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('resultModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-icon">
                <i class="fas fa-gift"></i>
            </div>
            <h3 class="modal-title" id="resultTitle">Congratulations!</h3>
            <p class="modal-text" id="resultDescription">You won a prize!</p>
            <button class="btn btn-primary btn-block" onclick="closeModal('resultModal')">
                Continue
            </button>
        </div>
    </div>

    <!-- CHAT -->
    <div class="chat-toggle" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
    </div>
    
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <h3>Global Chat</h3>
            <button class="btn btn-secondary" onclick="toggleChat()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will appear here -->
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Type a message..." onkeypress="if(event.key === 'Enter') sendMessage()">
            <button class="btn btn-primary" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://mqonelsoqyvrasrzrzfl.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_f8uHHPY9f1BkZgc_G4CEvw_47RXMfee';
        
        // Initialize Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Game State
        let gameState = {
            id: null,
            user_id: null,
            username: 'Guest',
            email: '',
            coins: 0,
            axmo: 0,
            total_spins: 0,
            total_pets: 0,
            screen_time: 0,
            bag_capacity: 4,
            pet_level: 1,
            click_multiplier: 1,
            level: 1,
            experience: 0,
            pets: [],
            buffs: [],
            last_spin: null
        };
        
        // Wheel Prizes
        const wheelPrizes = [
            { type: 'multiplier', value: 2, name: '2x Multiplier', probability: 300 },
            { type: 'multiplier', value: 2.5, name: '2.5x Multiplier', probability: 150 },
            { type: 'multiplier', value: 3, name: '3x Multiplier', probability: 130 },
            { type: 'multiplier', value: 4, name: '4x Multiplier', probability: 120 },
            { type: 'multiplier', value: 4.5, name: '4.5x Multiplier', probability: 110 },
            { type: 'multiplier', value: 5, name: '5x Multiplier', probability: 100 },
            { type: 'multiplier', value: 6, name: '6x Multiplier', probability: 95 },
            { type: 'multiplier', value: 6.5, name: '6.5x Multiplier', probability: 90 },
            { type: 'multiplier', value: 10, name: '10x Multiplier', probability: 50 },
            { type: 'multiplier', value: 20, name: '20x Multiplier', probability: 20 },
            { type: 'multiplier', value: 30, name: '30x Multiplier', probability: 10 },
            { type: 'multiplier', value: 50, name: '50x Multiplier', probability: 5 },
            { type: 'multiplier', value: 100, name: '100x Multiplier', probability: 3 },
            { type: 'multiplier', value: 1000, name: '1000x Multiplier', probability: 1 },
            { type: 'multiplier', value: 5000, name: '5000x Multiplier', probability: 0.5 },
            { type: 'multiplier', value: 9999, name: '9999x Multiplier', probability: 0.1 },
            { type: 'axmo', value: 1, name: '1 Free Axmo', probability: 50 },
            { type: 'axmo', value: 5, name: '5 Free Axmo', probability: 10 },
            { type: 'coins', value: 100, name: '100 Coins', probability: 100 },
            { type: 'coins', value: 500, name: '500 Coins', probability: 50 },
            { type: 'coins', value: 1000, name: '1000 Coins', probability: 20 },
            { type: 'pet', value: 'op', name: 'OP Pet', probability: 5 },
            { type: 'pet', value: 'normal', name: 'Normal Pet', probability: 30 },
            { type: 'pet', value: 'bad', name: 'Bad Pet', probability: 40 },
            { type: 'zonk', value: 0, name: 'Zonk!', probability: 80 },
            { type: 'penalty', value: 0.5, name: 'Penalty 0.5x', probability: 20 }
        ];
        
        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const userInfo = document.getElementById('userInfo');
        const navLinks = document.getElementById('navLinks');
        const coinCount = document.getElementById('coinCount');
        const axmoCount = document.getElementById('axmoCount');
        const userName = document.getElementById('userName');
        const userLevel = document.getElementById('userLevel');
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const currentAxmo = document.getElementById('currentAxmo');
        const spinTimer = document.getElementById('spinTimer');
        const totalSpins = document.getElementById('totalSpins');
        const nextSpinTime = document.getElementById('nextSpinTime');
        const cps = document.getElementById('cps');
        const clickMultiplier = document.getElementById('clickMultiplier');
        const petsCount = document.getElementById('petsCount');
        const petLevel = document.getElementById('petLevel');
        const clickValue = document.getElementById('clickValue');
        const petsGrid = document.getElementById('petsGrid');
        const currentBagSize = document.getElementById('currentBagSize');
        const nextBagSize = document.getElementById('nextBagSize');
        const bagUpgradeCost = document.getElementById('bagUpgradeCost');
        const petUpgradeCost = document.getElementById('petUpgradeCost');
        const bagUpgradeBtn = document.getElementById('bagUpgradeBtn');
        const petUpgradeBtn = document.getElementById('petUpgradeBtn');
        const leaderboardBody = document.getElementById('leaderboardBody');
        const leaderboardColumn = document.getElementById('leaderboardColumn');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileJoinDate = document.getElementById('profileJoinDate');
        const profileTime = document.getElementById('profileTime');
        const profileCoins = document.getElementById('profileCoins');
        const profileAxmo = document.getElementById('profileAxmo');
        const profileSpins = document.getElementById('profileSpins');
        const profilePets = document.getElementById('profilePets');
        const profileBag = document.getElementById('profileBag');
        const profileLevel = document.getElementById('profileLevel');
        const achievementsList = document.getElementById('achievementsList');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        
        // Game Variables
        let coinsPerSecond = 0;
        let isSpinning = false;
        let spinCooldown = 300; // 5 minutes in seconds
        let lastSpinTime = 0;
        let chatSubscription = null;
        
        // Initialize Game
        document.addEventListener('DOMContentLoaded', async function() {
            await checkAuth();
            initializeWheel();
            setInterval(updateGame, 1000);
            setInterval(saveGameState, 30000);
            setInterval(updateSpinTimerDisplay, 1000);
            loadChatMessages();
            subscribeToChat();
            
            // Hide user info initially
            userInfo.style.display = 'none';
            navLinks.style.display = 'none';
        });
        
        // Check Authentication
        async function checkAuth() {
            const { data, error } = await supabase.auth.getSession();
            if (data.session) {
                gameState.user_id = data.session.user.id;
                await loadGameState();
                showPage('main-menu');
                userInfo.style.display = 'flex';
                navLinks.style.display = 'flex';
            } else {
                showPage('auth-page');
            }
        }
        
        // Load Game State
        async function loadGameState() {
            try {
                // Load profile
                const { data: profile, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('user_id', gameState.user_id)
                    .single();
                
                if (error) {
                    // Create profile if doesn't exist
                    await createProfile();
                    await loadGameState();
                    return;
                }
                
                if (profile) {
                    gameState.id = profile.id;
                    gameState.username = profile.username || 'Player';
                    gameState.email = profile.email || '';
                    gameState.coins = profile.coins || 100;
                    gameState.axmo = profile.axmo || 1;
                    gameState.total_spins = profile.total_spins || 0;
                    gameState.total_pets = profile.total_pets || 0;
                    gameState.screen_time = profile.screen_time || 0;
                    gameState.bag_capacity = profile.bag_capacity || 4;
                    gameState.pet_level = profile.pet_level || 1;
                    gameState.click_multiplier = profile.click_multiplier || 1;
                    gameState.level = profile.level || 1;
                    gameState.experience = profile.experience || 0;
                    gameState.last_spin = profile.last_login;
                    
                    // Load pets
                    const { data: pets } = await supabase
                        .from('pets')
                        .select('*')
                        .eq('user_id', gameState.id);
                    
                    gameState.pets = pets || [];
                    
                    // Update UI
                    updateUI();
                    updateClickerUI();
                    calculateCPS();
                    
                    // Update last login
                    await supabase
                        .from('profiles')
                        .update({ last_login: new Date().toISOString() })
                        .eq('id', gameState.id);
                }
            } catch (error) {
                console.error('Error loading game state:', error);
            }
        }
        
        // Create Profile
        async function createProfile() {
            const { data: user } = await supabase.auth.getUser();
            if (!user.user) return;
            
            const { error } = await supabase
                .from('profiles')
                .insert([{
                    user_id: user.user.id,
                    username: user.user.user_metadata?.username || user.user.email?.split('@')[0] || 'Player',
                    email: user.user.email,
                    coins: 100,
                    axmo: 1
                }]);
            
            if (error) {
                console.error('Error creating profile:', error);
            }
        }
        
        // Save Game State
        async function saveGameState() {
            if (!gameState.user_id) return;
            
            try {
                const { error } = await supabase
                    .from('profiles')
                    .update({
                        coins: gameState.coins,
                        axmo: gameState.axmo,
                        total_spins: gameState.total_spins,
                        total_pets: gameState.pets.length,
                        screen_time: gameState.screen_time,
                        bag_capacity: gameState.bag_capacity,
                        pet_level: gameState.pet_level,
                        click_multiplier: gameState.click_multiplier,
                        level: gameState.level,
                        experience: gameState.experience
                    })
                    .eq('user_id', gameState.user_id);
                
                if (error) throw error;
            } catch (error) {
                console.error('Error saving game state:', error);
            }
        }
        
        // Update UI
        function updateUI() {
            coinCount.textContent = gameState.coins.toLocaleString();
            axmoCount.textContent = gameState.axmo.toLocaleString();
            userName.textContent = gameState.username;
            userLevel.textContent = gameState.level;
            currentAxmo.textContent = gameState.axmo;
            totalSpins.textContent = gameState.total_spins;
            
            // Update profile page if active
            if (document.getElementById('profile').classList.contains('active')) {
                updateProfileUI();
            }
        }
        
        // Update Clicker UI
        function updateClickerUI() {
            cps.textContent = coinsPerSecond.toFixed(1);
            clickMultiplier.textContent = gameState.click_multiplier.toFixed(1) + 'x';
            petsCount.textContent = `${gameState.pets.length}/${gameState.bag_capacity}`;
            petLevel.textContent = gameState.pet_level;
            clickValue.textContent = `+${gameState.click_multiplier.toFixed(1)}`;
            
            currentBagSize.textContent = gameState.bag_capacity;
            nextBagSize.textContent = gameState.bag_capacity * 2;
            bagUpgradeCost.textContent = (200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4))).toLocaleString();
            petUpgradeCost.textContent = (30 * Math.pow(3, gameState.pet_level - 1)).toLocaleString();
            
            // Update buttons
            bagUpgradeBtn.disabled = gameState.coins < (200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4)));
            petUpgradeBtn.disabled = gameState.coins < (30 * Math.pow(3, gameState.pet_level - 1));
            
            // Update pets grid
            updatePetsGrid();
        }
        
        // Calculate Coins Per Second
        function calculateCPS() {
            let total = 0;
            gameState.pets.forEach(pet => {
                total += pet.production;
            });
            coinsPerSecond = total;
        }
        
        // Update Game Loop
        function updateGame() {
            // Add passive income
            gameState.coins += coinsPerSecond;
            
            // Update screen time
            gameState.screen_time++;
            
            // Update UI
            updateUI();
            updateClickerUI();
        }
        
        // Update Spin Timer
        function updateSpinTimerDisplay() {
            if (!lastSpinTime) return;
            
            const now = Math.floor(Date.now() / 1000);
            const timeSinceLastSpin = now - lastSpinTime;
            
            if (timeSinceLastSpin < spinCooldown) {
                const remaining = spinCooldown - timeSinceLastSpin;
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                spinTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                nextSpinTime.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                spinButton.disabled = true;
            } else {
                spinTimer.textContent = 'Ready!';
                nextSpinTime.textContent = 'Ready!';
                spinButton.disabled = false;
            }
        }
        
        // Page Navigation
        function showPage(pageId) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            if (pageId !== 'auth-page') {
                const activeLink = document.querySelector(`.nav-link[onclick*="${pageId}"]`);
                if (activeLink) activeLink.classList.add('active');
            }
            
            // Show page
            pages.forEach(page => {
                page.classList.remove('active');
                if (page.id === pageId) {
                    page.classList.add('active');
                    
                    // Load page-specific data
                    switch(pageId) {
                        case 'leaderboard':
                            loadLeaderboard('coins');
                            break;
                        case 'profile':
                            updateProfileUI();
                            break;
                        case 'spinning-wheel':
                            updateSpinButton();
                            break;
                    }
                }
            });
        }
        
        // Auth Functions
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }
        
        async function login(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            const { data, error } = await supabase.auth.signInWithPassword({
                email: email,
                password: password
            });
            
            if (error) {
                alert('Login failed: ' + error.message);
            } else {
                gameState.user_id = data.user.id;
                await loadGameState();
                showPage('main-menu');
                userInfo.style.display = 'flex';
                navLinks.style.display = 'flex';
            }
        }
        
        async function register(event) {
            event.preventDefault();
            
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!username || !email || !password) {
                alert('Please fill all fields');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            const { data, error } = await supabase.auth.signUp({
                email: email,
                password: password,
                options: {
                    data: {
                        username: username
                    }
                }
            });
            
            if (error) {
                alert('Registration failed: ' + error.message);
            } else {
                alert('Registration successful! Please login.');
                switchAuthTab('login');
                document.getElementById('loginEmail').value = email;
                document.getElementById('loginPassword').value = '';
            }
        }
        
        async function logout() {
            await supabase.auth.signOut();
            gameState = {
                id: null,
                user_id: null,
                username: 'Guest',
                email: '',
                coins: 0,
                axmo: 0,
                total_spins: 0,
                total_pets: 0,
                screen_time: 0,
                bag_capacity: 4,
                pet_level: 1,
                click_multiplier: 1,
                level: 1,
                experience: 0,
                pets: [],
                buffs: [],
                last_spin: null
            };
            userInfo.style.display = 'none';
            navLinks.style.display = 'none';
            showPage('auth-page');
        }
        
        // Spinning Wheel
        function initializeWheel() {
            wheel.innerHTML = '';
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', 
                           '#073B4C', '#EF476F', '#7209B7', '#3A86FF', '#FB5607'];
            
            for (let i = 0; i < 10; i++) {
                const section = document.createElement('div');
                section.className = 'wheel-section-part';
                section.style.backgroundColor = colors[i];
                section.style.transform = `rotate(${i * 36}deg)`;
                section.innerHTML = `<div style="transform: rotate(18deg);">${i + 1}</div>`;
                wheel.appendChild(section);
            }
        }
        
        function updateSpinButton() {
            const now = Math.floor(Date.now() / 1000);
            if (!lastSpinTime) {
                lastSpinTime = now - spinCooldown;
            }
            
            const timeSinceLastSpin = now - lastSpinTime;
            if (timeSinceLastSpin >= spinCooldown) {
                spinButton.disabled = false;
                spinButton.innerHTML = '<i class="fas fa-sync-alt"></i> Spin Wheel (1 Axmo)';
            } else {
                spinButton.disabled = true;
            }
        }
        
        async function spinWheel() {
            if (isSpinning) return;
            
            // Check if enough axmo
            if (gameState.axmo < 1) {
                alert('You need 1 Axmo to spin! (100 coins)');
                return;
            }
            
            // Check cooldown
            const now = Math.floor(Date.now() / 1000);
            if (now - lastSpinTime < spinCooldown) {
                alert('Please wait 5 minutes between spins!');
                return;
            }
            
            // Deduct axmo
            gameState.axmo -= 1;
            gameState.total_spins += 1;
            lastSpinTime = now;
            
            isSpinning = true;
            spinButton.disabled = true;
            
            // Select random prize
            const totalProbability = wheelPrizes.reduce((sum, prize) => sum + prize.probability, 0);
            const randomValue = Math.random() * totalProbability;
            let cumulativeProbability = 0;
            let selectedPrize = wheelPrizes[0];
            
            for (const prize of wheelPrizes) {
                cumulativeProbability += prize.probability;
                if (randomValue <= cumulativeProbability) {
                    selectedPrize = prize;
                    break;
                }
            }
            
            // Calculate spin rotation
            const fullRotations = 5;
            const prizeIndex = wheelPrizes.indexOf(selectedPrize);
            const sectionAngle = 36;
            const prizeOffset = (prizeIndex % 10) * sectionAngle;
            const randomOffset = Math.random() * sectionAngle;
            const totalRotation = fullRotations * 360 + prizeOffset + randomOffset;
            
            // Animate wheel
            wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
            wheel.style.transform = `rotate(${totalRotation}deg)`;
            
            // Wait for animation
            setTimeout(async () => {
                // Apply prize
                await applyPrize(selectedPrize);
                
                // Show result
                showResult(selectedPrize);
                
                // Reset wheel
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                    setTimeout(() => {
                        wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
                        isSpinning = false;
                        updateUI();
                        updateSpinButton();
                    }, 50);
                }, 2000);
                
                // Save game state
                await saveGameState();
                
            }, 4000);
        }
        
        async function applyPrize(prize) {
            switch (prize.type) {
                case 'multiplier':
                    gameState.click_multiplier *= prize.value;
                    break;
                case 'axmo':
                    gameState.axmo += prize.value;
                    break;
                case 'coins':
                    gameState.coins += prize.value;
                    break;
                case 'pet':
                    if (gameState.pets.length < gameState.bag_capacity) {
                        const petTypes = {
                            'op': { name: 'OP Pet', production: 10 },
                            'normal': { name: 'Normal Pet', production: 1 },
                            'bad': { name: 'Bad Pet', production: 0.5 }
                        };
                        
                        const petType = petTypes[prize.value] || petTypes.normal;
                        const pet = {
                            user_id: gameState.id,
                            name: petType.name,
                            type: prize.value,
                            production: petType.production * gameState.pet_level,
                            level: 1
                        };
                        
                        gameState.pets.push(pet);
                        calculateCPS();
                        
                        // Save pet to database
                        await supabase.from('pets').insert([pet]);
                    }
                    break;
                case 'penalty':
                    gameState.click_multiplier *= prize.value;
                    setTimeout(() => {
                        gameState.click_multiplier /= prize.value;
                    }, 60000);
                    break;
            }
            
            // Save spin history
            await supabase.from('spin_history').insert([{
                user_id: gameState.id,
                prize_type: prize.type,
                prize_name: prize.name,
                prize_value: prize.value.toString(),
                cost_axmo: 1
            }]);
        }
        
        function showResult(prize) {
            const resultTitle = document.getElementById('resultTitle');
            const resultDescription = document.getElementById('resultDescription');
            
            resultTitle.textContent = prize.name;
            
            let description = '';
            switch (prize.type) {
                case 'multiplier':
                    description = `You got ${prize.value}x click multiplier!`;
                    break;
                case 'axmo':
                    description = `You received ${prize.value} free Axmo!`;
                    break;
                case 'coins':
                    description = `You won ${prize.value} coins!`;
                    break;
                case 'pet':
                    description = `You got a ${prize.name}!`;
                    break;
                case 'penalty':
                    description = `Penalty! Click multiplier reduced to ${prize.value}x for 1 minute.`;
                    break;
                case 'zonk':
                    description = `Zonk! Better luck next time!`;
                    break;
            }
            
            resultDescription.textContent = description;
            showModal('resultModal');
        }
        
        // Clicker Game
        function clickCoin() {
            gameState.coins += gameState.click_multiplier;
            updateUI();
            
            // Create click effect
            createClickEffect(gameState.click_multiplier);
        }
        
        function createClickEffect(value) {
            const effect = document.createElement('div');
            effect.textContent = `+${value.toFixed(1)}`;
            effect.style.position = 'fixed';
            effect.style.color = '#fdcb6e';
            effect.style.fontWeight = 'bold';
            effect.style.fontSize = '20px';
            effect.style.pointerEvents = 'none';
            effect.style.zIndex = '9999';
            effect.style.textShadow = '0 2px 4px rgba(0,0,0,0.5)';
            
            const coin = document.querySelector('.coin');
            const rect = coin.getBoundingClientRect();
            const x = rect.left + rect.width / 2 + (Math.random() * 60 - 30);
            const y = rect.top - 20;
            
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            
            document.body.appendChild(effect);
            
            // Animate
            let opacity = 1;
            let yPos = y;
            const animation = setInterval(() => {
                opacity -= 0.02;
                yPos -= 2;
                effect.style.opacity = opacity;
                effect.style.top = `${yPos}px`;
                
                if (opacity <= 0) {
                    clearInterval(animation);
                    document.body.removeChild(effect);
                }
            }, 16);
        }
        
        function updatePetsGrid() {
            petsGrid.innerHTML = '';
            
            // Show current pets
            gameState.pets.forEach(pet => {
                const petCard = document.createElement('div');
                petCard.className = 'pet-card';
                
                let icon = 'fa-dog';
                if (pet.type === 'op') icon = 'fa-dragon';
                if (pet.type === 'bad') icon = 'fa-crow';
                
                petCard.innerHTML = `
                    <div class="pet-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <h4 class="pet-name">${pet.name}</h4>
                    <p class="pet-info">
                        Production: ${pet.production.toFixed(1)} coins/sec
                    </p>
                    <p class="pet-info">
                        Level: ${pet.level}
                    </p>
                `;
                petsGrid.appendChild(petCard);
            });
            
            // Add buy pet button if there's space
            if (gameState.pets.length < gameState.bag_capacity) {
                const buyCard = document.createElement('div');
                buyCard.className = 'pet-card';
                buyCard.style.cursor = 'pointer';
                buyCard.onclick = buyPet;
                
                buyCard.innerHTML = `
                    <div class="pet-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h4 class="pet-name">Buy New Pet</h4>
                    <p class="pet-info">
                        Cost: 10 coins
                    </p>
                    <p class="pet-info">
                        Production: ${gameState.pet_level} coins/sec
                    </p>
                    <button class="btn btn-success btn-block">
                        Buy Pet
                    </button>
                `;
                petsGrid.appendChild(buyCard);
            }
        }
        
        async function buyPet() {
            if (gameState.pets.length >= gameState.bag_capacity) {
                alert('Your bag is full! Upgrade your bag first.');
                return;
            }
            
            if (gameState.coins < 10) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= 10;
            
            const pet = {
                user_id: gameState.id,
                name: 'Normal Pet',
                type: 'normal',
                production: 1 * gameState.pet_level,
                level: 1
            };
            
            gameState.pets.push(pet);
            calculateCPS();
            updateUI();
            updateClickerUI();
            
            // Save pet to database
            await supabase.from('pets').insert([pet]);
            await saveGameState();
        }
        
        async function upgradeBag() {
            const cost = 200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4));
            
            if (gameState.coins < cost) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= cost;
            gameState.bag_capacity *= 2;
            
            updateUI();
            updateClickerUI();
            await saveGameState();
        }
        
        async function upgradePets() {
            const cost = 30 * Math.pow(3, gameState.pet_level - 1);
            
            if (gameState.coins < cost) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= cost;
            gameState.pet_level += 1;
            
            // Update all pets
            gameState.pets.forEach(pet => {
                const baseProduction = pet.type === 'op' ? 10 : pet.type === 'bad' ? 0.5 : 1;
                pet.production = baseProduction * gameState.pet_level;
            });
            
            calculateCPS();
            updateUI();
            updateClickerUI();
            await saveGameState();
        }
        
        // Leaderboard
        async function loadLeaderboard(type) {
            // Update active tab
            document.querySelectorAll('.leaderboard-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            let data, error;
            let columnName = '';
            
            switch(type) {
                case 'coins':
                    columnName = 'Coins';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, coins, level')
                        .order('coins', { ascending: false })
                        .limit(20));
                    break;
                case 'axmo':
                    columnName = 'Axmo';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, axmo, level')
                        .order('axmo', { ascending: false })
                        .limit(20));
                    break;
                case 'spins':
                    columnName = 'Spins';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, total_spins, level')
                        .order('total_spins', { ascending: false })
                        .limit(20));
                    break;
                case 'pets':
                    columnName = 'Pets';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, total_pets, level')
                        .order('total_pets', { ascending: false })
                        .limit(20));
                    break;
                case 'time':
                    columnName = 'Play Time';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, screen_time, level')
                        .order('screen_time', { ascending: false })
                        .limit(20));
                    break;
            }
            
            if (error) {
                console.error('Error loading leaderboard:', error);
                return;
            }
            
            // Update column header
            leaderboardColumn.textContent = columnName;
            
            // Clear table
            leaderboardBody.innerHTML = '';
            
            // Populate table
            data.forEach((item, index) => {
                const row = document.createElement('tr');
                
                let rankClass = '';
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                let value = '';
                switch(type) {
                    case 'coins': value = item.coins.toLocaleString(); break;
                    case 'axmo': value = item.axmo.toLocaleString(); break;
                    case 'spins': value = item.total_spins.toLocaleString(); break;
                    case 'pets': value = item.total_pets.toLocaleString(); break;
                    case 'time': value = Math.floor(item.screen_time / 3600) + 'h'; break;
                }
                
                row.innerHTML = `
                    <td class="${rankClass}">${index + 1}</td>
                    <td>${item.username}</td>
                    <td class="${rankClass}">${value}</td>
                    <td>${item.level}</td>
                `;
                
                leaderboardBody.appendChild(row);
            });
        }
        
        // Profile
        function updateProfileUI() {
            profileName.textContent = gameState.username;
            profileEmail.textContent = gameState.email;
            profileJoinDate.textContent = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            profileTime.textContent = Math.floor(gameState.screen_time / 3600) + 'h ' + Math.floor((gameState.screen_time % 3600) / 60) + 'm';
            profileCoins.textContent = gameState.coins.toLocaleString();
            profileAxmo.textContent = gameState.axmo.toLocaleString();
            profileSpins.textContent = gameState.total_spins.toLocaleString();
            profilePets.textContent = gameState.pets.length.toLocaleString();
            profileBag.textContent = gameState.bag_capacity;
            profileLevel.textContent = gameState.level;
        }
        
        // Chat Functions
        async function loadChatMessages() {
            const { data, error } = await supabase
                .from('messages')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(50);
            
            if (!error && data) {
                chatMessages.innerHTML = '';
                data.reverse().forEach(message => {
                    addMessageToChat(message, false);
                });
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        function subscribeToChat() {
            chatSubscription = supabase
                .channel('chat')
                .on('postgres_changes', 
                    { event: 'INSERT', schema: 'public', table: 'messages' }, 
                    (payload) => {
                        addMessageToChat(payload.new);
                    }
                )
                .subscribe();
        }
        
        function addMessageToChat(message, scroll = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            if (message.user_id === gameState.id) {
                messageDiv.classList.add('own');
            }
            
            const time = new Date(message.created_at).toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <span>${message.username}</span>
                    <span>${time}</span>
                </div>
                <div class="message-content">${message.content}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            
            if (scroll) {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        async function sendMessage() {
            const content = chatInput.value.trim();
            
            if (!content || !gameState.user_id) return;
            
            const { error } = await supabase
                .from('messages')
                .insert([{
                    user_id: gameState.id,
                    username: gameState.username,
                    content: content
                }]);
            
            if (!error) {
                chatInput.value = '';
            }
        }
        
        function toggleChat() {
            chatContainer.classList.toggle('active');
            if (chatContainer.classList.contains('active')) {
                chatInput.focus();
            }
        }
        
        // Modal Functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Enter key for chat
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
