<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXMO GAME | Spinning Wheel + Clicker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* VARIABLES & RESET */
        :root {
            --black: #000000;
            --white: #FFFFFF;
            --gray-50: #FAFAFA;
            --gray-100: #F5F5F5;
            --gray-200: #EEEEEE;
            --gray-300: #E0E0E0;
            --gray-400: #BDBDBD;
            --gray-500: #9E9E9E;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            --accent: #FF6B35;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --info: #2196F3;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px rgba(0,0,0,0.15);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--gray-900) 0%, var(--black) 100%);
            color: var(--gray-100);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* TYPOGRAPHY */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        h1 { font-size: 3rem; }
        h2 { font-size: 2.25rem; }
        h3 { font-size: 1.75rem; }
        h4 { font-size: 1.5rem; }
        h5 { font-size: 1.25rem; }
        h6 { font-size: 1rem; }

        .text-gradient {
            background: linear-gradient(90deg, var(--white), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* LAYOUT */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .page {
            display: none;
            min-height: calc(100vh - 80px);
            padding: 2rem 0;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HEADER */
        .header {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--accent);
            background: rgba(255, 107, 53, 0.1);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--accent);
        }

        .logo-text h1 {
            font-size: 1.8rem;
            margin: 0;
            background: linear-gradient(90deg, var(--white), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-text span {
            color: var(--gray-400);
            font-size: 0.9rem;
        }

        /* NAVIGATION */
        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--gray-300);
            text-decoration: none;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-md);
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            color: var(--white);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-link.active {
            color: var(--accent);
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        /* USER INFO */
        .user-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .currency {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .currency.coin {
            border-color: var(--gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent);
        }

        .currency.axmo {
            border-color: var(--info);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .currency-icon {
            font-size: 1.5rem;
        }

        .coin .currency-icon { color: var(--gold); }
        .axmo .currency-icon { color: var(--info); }

        .currency-value {
            font-weight: 700;
            font-size: 1.25rem;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-lg);
            transition: var(--transition);
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gray-800), var(--gray-900));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--white);
            border: 2px solid var(--accent);
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            color: var(--white);
        }

        .user-level {
            font-size: 0.875rem;
            color: var(--gray-400);
        }

        /* AUTH PAGE */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: 3rem;
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow-xl);
        }

        .auth-tabs {
            display: flex;
            gap: 1px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .auth-tab {
            flex: 1;
            padding: 1rem;
            background: transparent;
            border: none;
            color: var(--gray-400);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .auth-tab.active {
            background: var(--accent);
            color: var(--white);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--gray-300);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            color: var(--white);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #FF5722;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-warning {
            background: var(--warning);
            color: var(--black);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-block {
            width: 100%;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* MAIN MENU */
        .main-menu {
            text-align: center;
            padding: 4rem 0;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .menu-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), transparent);
        }

        .menu-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent);
            box-shadow: var(--shadow-xl);
        }

        .menu-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
        }

        .menu-card h3 {
            color: var(--white);
            margin-bottom: 1rem;
        }

        .menu-card p {
            color: var(--gray-400);
            margin-bottom: 1.5rem;
        }

        /* SPINNING WHEEL */
        .wheel-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            padding: 2rem;
            margin-top: 2rem;
        }

        .wheel-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 2rem auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 15px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                inset 0 0 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(255, 107, 53, 0.3);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        }

        .wheel-section-part {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .wheel-center {
            position: absolute;
            width: 80px;
            height: 80px;
            background: var(--black);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            border: 5px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }

        .wheel-pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            font-size: 4rem;
            color: var(--accent);
            filter: drop-shadow(0 0 10px rgba(255, 107, 53, 0.8));
        }

        .spin-info {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
        }

        /* CLICKER GAME */
        .clicker-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .clicker-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .clicker-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .clicker-stat h4 {
            color: var(--gray-400);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .clicker-stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
        }

        .coin-container {
            text-align: center;
            margin: 3rem 0;
        }

        .coin {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle at 30% 30%, var(--gold), #B8860B);
            border-radius: 50%;
            margin: 0 auto 2rem;
            cursor: pointer;
            position: relative;
            box-shadow: 
                0 0 60px rgba(255, 215, 0, 0.5),
                inset 0 -10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coin:active {
            transform: scale(0.95);
        }

        .coin-inner {
            width: 160px;
            height: 160px;
            background: radial-gradient(circle at 40% 40%, #FFD700, #B8860B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: rgba(0, 0, 0, 0.8);
            font-weight: bold;
        }

        .pets-section, .upgrades-section {
            margin-top: 3rem;
        }

        .pets-grid, .upgrades-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .pet-card, .upgrade-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            transition: var(--transition);
        }

        .pet-card:hover, .upgrade-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
        }

        .pet-icon, .upgrade-icon {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        /* LEADERBOARD */
        .leaderboard-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .leaderboard-tabs {
            display: flex;
            gap: 1px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .leaderboard-tab {
            flex: 1;
            padding: 1rem;
            background: transparent;
            border: none;
            color: var(--gray-400);
            cursor: pointer;
            transition: var(--transition);
        }

        .leaderboard-tab.active {
            background: var(--accent);
            color: var(--white);
        }

        .leaderboard-table {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .leaderboard-table th {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.25rem;
            text-align: left;
            color: var(--white);
            font-weight: 600;
        }

        .leaderboard-table td {
            padding: 1.25rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .leaderboard-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .rank-1 { color: var(--gold); font-weight: bold; }
        .rank-2 { color: var(--silver); font-weight: bold; }
        .rank-3 { color: var(--bronze); font-weight: bold; }

        /* PROFILE */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gray-800), var(--gray-900));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--white);
            border: 4px solid var(--accent);
        }

        .profile-info h2 {
            margin-bottom: 0.5rem;
            color: var(--white);
        }

        .profile-info p {
            color: var(--gray-400);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .profile-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-stat h4 {
            color: var(--gray-400);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .profile-stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--white);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: 3rem;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: var(--shadow-xl);
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: var(--gray-400);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--white);
        }

        /* CHAT */
        .chat-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--white);
            cursor: pointer;
            z-index: 100;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        .chat-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            display: flex;
            flex-direction: column;
            z-index: 101;
            box-shadow: var(--shadow-xl);
            display: none;
        }

        .chat-container.active {
            display: flex;
        }

        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            max-width: 80%;
        }

        .message.own {
            align-self: flex-end;
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid rgba(255, 107, 53, 0.3);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-400);
        }

        .message-content {
            word-wrap: break-word;
        }

        .chat-input {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 1rem;
        }

        .chat-input input {
            flex: 1;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            color: var(--white);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .user-info {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .wheel-container {
                width: 300px;
                height: 300px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-container {
                width: calc(100% - 4rem);
                height: 70vh;
            }
        }

        /* ANIMATIONS */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .float { animation: float 3s ease-in-out infinite; }
        .pulse { animation: pulse 2s ease-in-out infinite; }
        .spin { animation: spin 1s linear infinite; }

        /* UTILITIES */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        .mb-3 { margin-bottom: 3rem; }
        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        .mt-3 { margin-top: 3rem; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container header-content">
            <a href="#" class="logo" onclick="showPage('main-menu'); return false;">
                <div class="logo-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="logo-text">
                    <h1 class="text-gradient">AXMO GAME</h1>
                    <span>Spinning Wheel + Clicker + Fusion</span>
                </div>
            </a>
            
            <div class="user-info" id="userInfo" style="display: none;">
                <div class="currency coin">
                    <i class="fas fa-coins currency-icon"></i>
                    <span class="currency-value" id="coinCount">0</span>
                </div>
                <div class="currency axmo">
                    <i class="fas fa-gem currency-icon"></i>
                    <span class="currency-value" id="axmoCount">0</span>
                </div>
                <div class="user-profile" onclick="showPage('profile')">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Player</span>
                        <span class="user-level">Level <span id="userLevel">1</span></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- NAVIGATION -->
    <nav class="container" style="margin: 1rem 0;">
        <div class="nav-links" id="navLinks" style="display: none;">
            <a href="#" class="nav-link" onclick="showPage('main-menu'); return false;">
                <i class="fas fa-home"></i> Main Menu
            </a>
            <a href="#" class="nav-link" onclick="showPage('spinning-wheel'); return false;">
                <i class="fas fa-sync-alt"></i> Spinning Wheel
            </a>
            <a href="#" class="nav-link" onclick="showPage('clicker'); return false;">
                <i class="fas fa-coins"></i> Axmo Clicker
            </a>
            <a href="#" class="nav-link" onclick="showPage('leaderboard'); return false;">
                <i class="fas fa-trophy"></i> Leaderboard
            </a>
            <a href="#" class="nav-link" onclick="logout(); return false;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <!-- PAGES -->
    <div class="container">
        <!-- AUTH PAGE -->
        <div class="page active" id="auth-page">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                        <button class="auth-tab" onclick="switchAuthTab('register')">Register</button>
                    </div>
                    
                    <div class="auth-form active" id="loginForm">
                        <h2 class="text-center mb-2">Welcome Back</h2>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password">
                        </div>
                        <button class="btn btn-primary btn-block" onclick="login()">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </div>
                    
                    <div class="auth-form" id="registerForm">
                        <h2 class="text-center mb-2">Create Account</h2>
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="registerUsername" class="form-input" placeholder="Choose username">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="registerPassword" class="form-input" placeholder="Minimum 6 characters">
                        </div>
                        <button class="btn btn-primary btn-block" onclick="register()">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN MENU -->
        <div class="page" id="main-menu">
            <div class="main-menu">
                <h1 class="text-center text-gradient">Game Menu</h1>
                <p class="text-center mb-3" style="color: var(--gray-400); max-width: 600px; margin: 0 auto;">
                    Choose your game mode and start earning coins, collecting pets, and climbing the leaderboards!
                </p>
                
                <div class="menu-grid">
                    <div class="menu-card" onclick="showPage('spinning-wheel')">
                        <div class="menu-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h3>Spinning Wheel</h3>
                        <p>Spin the wheel for amazing prizes, buffs, and special rewards. Test your luck!</p>
                        <button class="btn btn-secondary">Play Now</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('clicker')">
                        <div class="menu-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <h3>Axmo Clicker</h3>
                        <p>Click coins, buy pets, upgrade your bag, and build your coin empire!</p>
                        <button class="btn btn-secondary">Start Clicking</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('leaderboard')">
                        <div class="menu-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3>Leaderboard</h3>
                        <p>Compete with other players and see who's the richest and most skilled!</p>
                        <button class="btn btn-secondary">View Rankings</button>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('profile')">
                        <div class="menu-icon">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3>My Profile</h3>
                        <p>View your stats, achievements, and customize your profile.</p>
                        <button class="btn btn-secondary">View Profile</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SPINNING WHEEL -->
        <div class="page" id="spinning-wheel">
            <div class="wheel-section">
                <h2 class="text-gradient">Spinning Wheel</h2>
                <p class="mb-2">Spin the wheel and win amazing prizes! Each spin costs 1 Axmo (100 coins).</p>
                
                <div class="wheel-container">
                    <div class="wheel-pointer">
                        <i class="fas fa-caret-down"></i>
                    </div>
                    <div class="wheel" id="wheel">
                        <!-- Wheel sections will be generated by JS -->
                    </div>
                    <div class="wheel-center">
                        SPIN
                    </div>
                </div>
                
                <div class="spin-info">
                    <h4>Available Spins: <span id="availableSpins">0</span></h4>
                    <p class="mb-2">Next free spin in: <span id="nextSpinTimer">5:00</span> minutes</p>
                    <button class="btn btn-primary" id="spinButton" onclick="spinWheel()">
                        <i class="fas fa-sync-alt"></i> Spin Wheel (1 Axmo)
                    </button>
                </div>
                
                <div class="mt-3">
                    <h4>Possible Prizes:</h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
                        <span class="btn btn-secondary" style="padding: 0.5rem 1rem;">Coin Multipliers</span>
                        <span class="btn btn-secondary" style="padding: 0.5rem 1rem;">Free Axmo</span>
                        <span class="btn btn-secondary" style="padding: 0.5rem 1rem;">Special Pets</span>
                        <span class="btn btn-secondary" style="padding: 0.5rem 1rem;">Coin Rewards</span>
                        <span class="btn btn-secondary" style="padding: 0.5rem 1rem;">Buff Effects</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CLICKER GAME -->
        <div class="page" id="clicker">
            <div class="clicker-container">
                <h2 class="text-gradient">Axmo Clicker</h2>
                <p class="mb-3">Click the coin to earn coins, buy pets, and upgrade your equipment!</p>
                
                <div class="clicker-header">
                    <div class="clicker-stat">
                        <h4>Coins Per Second</h4>
                        <div class="clicker-stat-value" id="cps">0</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Click Multiplier</h4>
                        <div class="clicker-stat-value" id="clickMultiplier">1x</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Pets Owned</h4>
                        <div class="clicker-stat-value" id="petsCount">0/4</div>
                    </div>
                    <div class="clicker-stat">
                        <h4>Pet Level</h4>
                        <div class="clicker-stat-value" id="petLevel">1</div>
                    </div>
                </div>
                
                <div class="coin-container">
                    <div class="coin" onclick="clickCoin()">
                        <div class="coin-inner">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    <p>Click the coin to earn coins! <span id="clickValue">+1</span> per click</p>
                </div>
                
                <div class="pets-section">
                    <h3><i class="fas fa-paw"></i> Pets</h3>
                    <p>Pets automatically generate coins every second</p>
                    <div class="pets-grid" id="petsGrid">
                        <!-- Pets will be loaded here -->
                    </div>
                </div>
                
                <div class="upgrades-section">
                    <h3><i class="fas fa-arrow-up"></i> Upgrades</h3>
                    <p>Upgrade your equipment to boost your earnings</p>
                    <div class="upgrades-grid">
                        <div class="upgrade-card">
                            <div class="upgrade-icon">
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <h4>Bag Upgrade</h4>
                            <p class="mb-2" style="color: var(--gray-400); font-size: 0.9rem;">
                                Increase pet capacity from <span id="currentBagSize">4</span> to <span id="nextBagSize">8</span>
                            </p>
                            <p class="mb-2" style="font-weight: 600;">Cost: <span id="bagUpgradeCost">200</span> coins</p>
                            <button class="btn btn-warning btn-block" onclick="upgradeBag()" id="bagUpgradeBtn">
                                Upgrade Bag
                            </button>
                        </div>
                        
                        <div class="upgrade-card">
                            <div class="upgrade-icon">
                                <i class="fas fa-level-up-alt"></i>
                            </div>
                            <h4>Pet Upgrade</h4>
                            <p class="mb-2" style="color: var(--gray-400); font-size: 0.9rem;">
                                Increase production of all pets by 3x
                            </p>
                            <p class="mb-2" style="font-weight: 600;">Cost: <span id="petUpgradeCost">30</span> coins</p>
                            <button class="btn btn-success btn-block" onclick="upgradePets()" id="petUpgradeBtn">
                                Upgrade Pets
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEADERBOARD -->
        <div class="page" id="leaderboard">
            <div class="leaderboard-container">
                <h2 class="text-gradient">Leaderboard</h2>
                <p class="mb-3">See how you rank against other players!</p>
                
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" onclick="loadLeaderboard('coins')">
                        <i class="fas fa-coins"></i> Most Coins
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('axmo')">
                        <i class="fas fa-gem"></i> Most Axmo
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('spins')">
                        <i class="fas fa-sync-alt"></i> Most Spins
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('pets')">
                        <i class="fas fa-paw"></i> Most Pets
                    </button>
                    <button class="leaderboard-tab" onclick="loadLeaderboard('time')">
                        <i class="fas fa-clock"></i> Most Play Time
                    </button>
                </div>
                
                <div class="table-responsive">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th id="leaderboardColumn">Coins</th>
                                <th>Level</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Leaderboard data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PROFILE -->
        <div class="page" id="profile">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar-large" id="profileAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName">Player Name</h2>
                        <p><i class="fas fa-envelope"></i> <span id="profileEmail">email@example.com</span></p>
                        <p><i class="fas fa-calendar"></i> Joined <span id="profileJoinDate">January 1, 2023</span></p>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="profile-stat">
                        <h4>Total Coins</h4>
                        <div class="profile-stat-value" id="profileCoins">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Axmo</h4>
                        <div class="profile-stat-value" id="profileAxmo">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Spins</h4>
                        <div class="profile-stat-value" id="profileSpins">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Total Pets</h4>
                        <div class="profile-stat-value" id="profilePets">0</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Play Time</h4>
                        <div class="profile-stat-value" id="profileTime">0h</div>
                    </div>
                    <div class="profile-stat">
                        <h4>Level</h4>
                        <div class="profile-stat-value" id="profileLevel">1</div>
                    </div>
                </div>
                
                <div class="mt-3">
                    <h3>Achievements</h3>
                    <div id="achievementsList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <!-- Achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('resultModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center">
                <div class="mb-2" style="font-size: 4rem; color: var(--gold);">
                    <i class="fas fa-gift"></i>
                </div>
                <h3 id="resultTitle" class="text-gradient">Congratulations!</h3>
                <p id="resultDescription" class="mb-3">You won a prize!</p>
                <button class="btn btn-primary" onclick="closeModal('resultModal')">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- CHAT -->
    <div class="chat-toggle" onclick="toggleChat()">
        <i class="fas fa-comment-dots"></i>
    </div>
    
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <h4>Global Chat</h4>
            <button class="btn btn-secondary" onclick="toggleChat()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will appear here -->
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Type a message...">
            <button class="btn btn-primary" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://mqonelsoqyvrasrzrzfl.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_f8uHHPY9f1BkZgc_G4CEvw_47RXMfee';
        
        // Initialize Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Game State
        let gameState = {
            id: null,
            user_id: null,
            username: '',
            email: '',
            coins: 0,
            axmo: 0,
            total_spins: 0,
            total_pets: 0,
            screen_time: 0,
            bag_capacity: 4,
            pet_level: 1,
            click_multiplier: 1,
            level: 1,
            experience: 0,
            pets: [],
            buffs: [],
            last_spin: null,
            is_logged_in: false
        };
        
        // Wheel Configuration
        const wheelPrizes = [
            { type: 'multiplier', value: 2, name: '2x Multiplier', probability: 300 },
            { type: 'multiplier', value: 2.5, name: '2.5x Multiplier', probability: 150 },
            { type: 'multiplier', value: 3, name: '3x Multiplier', probability: 130 },
            { type: 'multiplier', value: 4, name: '4x Multiplier', probability: 120 },
            { type: 'multiplier', value: 4.5, name: '4.5x Multiplier', probability: 110 },
            { type: 'multiplier', value: 5, name: '5x Multiplier', probability: 100 },
            { type: 'multiplier', value: 6, name: '6x Multiplier', probability: 95 },
            { type: 'multiplier', value: 6.5, name: '6.5x Multiplier', probability: 90 },
            { type: 'multiplier', value: 10, name: '10x Multiplier', probability: 50 },
            { type: 'multiplier', value: 20, name: '20x Multiplier', probability: 20 },
            { type: 'multiplier', value: 30, name: '30x Multiplier', probability: 10 },
            { type: 'multiplier', value: 50, name: '50x Multiplier', probability: 5 },
            { type: 'multiplier', value: 100, name: '100x Multiplier', probability: 3 },
            { type: 'multiplier', value: 1000, name: '1000x Multiplier', probability: 1 },
            { type: 'multiplier', value: 5000, name: '5000x Multiplier', probability: 0.5 },
            { type: 'multiplier', value: 9999, name: '9999x Multiplier', probability: 0.1 },
            { type: 'axmo', value: 1, name: '1 Free Axmo', probability: 50 },
            { type: 'axmo', value: 5, name: '5 Free Axmo', probability: 10 },
            { type: 'coins', value: 100, name: '100 Coins', probability: 100 },
            { type: 'coins', value: 500, name: '500 Coins', probability: 50 },
            { type: 'coins', value: 1000, name: '1000 Coins', probability: 20 },
            { type: 'pet', value: 'op', name: 'OP Pet', probability: 5 },
            { type: 'pet', value: 'normal', name: 'Normal Pet', probability: 30 },
            { type: 'pet', value: 'bad', name: 'Bad Pet', probability: 40 },
            { type: 'zonk', value: 0, name: 'Zonk!', probability: 80 },
            { type: 'penalty', value: 0.5, name: 'Penalty 0.5x', probability: 20 }
        ];
        
        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const userInfo = document.getElementById('userInfo');
        const navLinks = document.getElementById('navLinks');
        const coinCount = document.getElementById('coinCount');
        const axmoCount = document.getElementById('axmoCount');
        const userName = document.getElementById('userName');
        const userLevel = document.getElementById('userLevel');
        const userAvatar = document.getElementById('userAvatar');
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const availableSpins = document.getElementById('availableSpins');
        const nextSpinTimer = document.getElementById('nextSpinTimer');
        const cps = document.getElementById('cps');
        const clickMultiplier = document.getElementById('clickMultiplier');
        const petsCount = document.getElementById('petsCount');
        const petLevel = document.getElementById('petLevel');
        const clickValue = document.getElementById('clickValue');
        const petsGrid = document.getElementById('petsGrid');
        const currentBagSize = document.getElementById('currentBagSize');
        const nextBagSize = document.getElementById('nextBagSize');
        const bagUpgradeCost = document.getElementById('bagUpgradeCost');
        const petUpgradeCost = document.getElementById('petUpgradeCost');
        const bagUpgradeBtn = document.getElementById('bagUpgradeBtn');
        const petUpgradeBtn = document.getElementById('petUpgradeBtn');
        const leaderboardBody = document.getElementById('leaderboardBody');
        const leaderboardColumn = document.getElementById('leaderboardColumn');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileJoinDate = document.getElementById('profileJoinDate');
        const profileCoins = document.getElementById('profileCoins');
        const profileAxmo = document.getElementById('profileAxmo');
        const profileSpins = document.getElementById('profileSpins');
        const profilePets = document.getElementById('profilePets');
        const profileTime = document.getElementById('profileTime');
        const profileLevel = document.getElementById('profileLevel');
        const profileAvatar = document.getElementById('profileAvatar');
        const achievementsList = document.getElementById('achievementsList');
        const chatContainer = document.getElementById('chatContainer');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        
        // Game Variables
        let coinsPerSecond = 0;
        let isSpinning = false;
        let spinCooldown = 300; // 5 minutes in seconds
        let currentSpinCooldown = 0;
        let chatSubscription = null;
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', async function() {
            await checkAuth();
            initializeWheel();
            setInterval(updateGame, 1000);
            setInterval(saveGameState, 30000); // Save every 30 seconds
            setInterval(updateSpinTimer, 1000);
            loadChatMessages();
            subscribeToChat();
        });
        
        // Check authentication
        async function checkAuth() {
            const { data, error } = await supabase.auth.getSession();
            if (data.session) {
                gameState.user_id = data.session.user.id;
                await loadGameState();
                showPage('main-menu');
            } else {
                showPage('auth-page');
            }
        }
        
        // Load game state from database
        async function loadGameState() {
            try {
                // Load profile
                const { data: profile, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('user_id', gameState.user_id)
                    .single();
                
                if (error) throw error;
                
                if (profile) {
                    gameState.id = profile.id;
                    gameState.username = profile.username || 'Player';
                    gameState.email = profile.email || '';
                    gameState.coins = profile.coins || 0;
                    gameState.axmo = profile.axmo || 0;
                    gameState.total_spins = profile.total_spins || 0;
                    gameState.total_pets = profile.total_pets || 0;
                    gameState.screen_time = profile.screen_time || 0;
                    gameState.bag_capacity = profile.bag_capacity || 4;
                    gameState.pet_level = profile.pet_level || 1;
                    gameState.click_multiplier = profile.click_multiplier || 1;
                    gameState.level = profile.level || 1;
                    gameState.experience = profile.experience || 0;
                    
                    // Load pets
                    const { data: pets } = await supabase
                        .from('pets')
                        .select('*')
                        .eq('user_id', gameState.id);
                    
                    gameState.pets = pets || [];
                    
                    // Load buffs
                    const { data: buffs } = await supabase
                        .from('buffs')
                        .select('*')
                        .eq('user_id', gameState.id)
                        .gt('expires_at', new Date().toISOString());
                    
                    gameState.buffs = buffs || [];
                    
                    // Update UI
                    updateUI();
                    updateClickerUI();
                    calculateCPS();
                    
                    // Show user info
                    userInfo.style.display = 'flex';
                    navLinks.style.display = 'flex';
                }
            } catch (error) {
                console.error('Error loading game state:', error);
            }
        }
        
        // Save game state to database
        async function saveGameState() {
            if (!gameState.user_id) return;
            
            try {
                // Update profile
                const { error } = await supabase
                    .from('profiles')
                    .update({
                        coins: gameState.coins,
                        axmo: gameState.axmo,
                        total_spins: gameState.total_spins,
                        total_pets: gameState.total_pets,
                        screen_time: gameState.screen_time,
                        bag_capacity: gameState.bag_capacity,
                        pet_level: gameState.pet_level,
                        click_multiplier: gameState.click_multiplier,
                        level: gameState.level,
                        experience: gameState.experience,
                        updated_at: new Date().toISOString()
                    })
                    .eq('user_id', gameState.user_id);
                
                if (error) throw error;
                
                // Save pets
                for (const pet of gameState.pets) {
                    if (pet.id) {
                        await supabase
                            .from('pets')
                            .update(pet)
                            .eq('id', pet.id);
                    } else {
                        const { data } = await supabase
                            .from('pets')
                            .insert([{
                                user_id: gameState.id,
                                name: pet.name,
                                type: pet.type,
                                production: pet.production,
                                level: pet.level
                            }])
                            .select()
                            .single();
                        
                        if (data) pet.id = data.id;
                    }
                }
            } catch (error) {
                console.error('Error saving game state:', error);
            }
        }
        
        // Update UI
        function updateUI() {
            coinCount.textContent = gameState.coins.toLocaleString();
            axmoCount.textContent = gameState.axmo.toLocaleString();
            userName.textContent = gameState.username;
            userLevel.textContent = gameState.level;
            
            // Update profile page if active
            if (document.getElementById('profile').classList.contains('active')) {
                updateProfileUI();
            }
        }
        
        // Update clicker UI
        function updateClickerUI() {
            cps.textContent = coinsPerSecond.toFixed(1);
            clickMultiplier.textContent = gameState.click_multiplier.toFixed(1) + 'x';
            petsCount.textContent = `${gameState.pets.length}/${gameState.bag_capacity}`;
            petLevel.textContent = gameState.pet_level;
            clickValue.textContent = `+${gameState.click_multiplier.toFixed(1)}`;
            
            currentBagSize.textContent = gameState.bag_capacity;
            nextBagSize.textContent = gameState.bag_capacity * 2;
            bagUpgradeCost.textContent = (200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4))).toLocaleString();
            petUpgradeCost.textContent = (30 * Math.pow(3, gameState.pet_level - 1)).toLocaleString();
            
            // Update pet buttons
            bagUpgradeBtn.disabled = gameState.coins < (200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4)));
            petUpgradeBtn.disabled = gameState.coins < (30 * Math.pow(3, gameState.pet_level - 1));
            
            // Update pets grid
            updatePetsGrid();
        }
        
        // Calculate coins per second
        function calculateCPS() {
            let total = 0;
            gameState.pets.forEach(pet => {
                total += pet.production;
            });
            coinsPerSecond = total;
        }
        
        // Update game every second
        function updateGame() {
            // Add passive income
            gameState.coins += coinsPerSecond;
            
            // Update screen time
            gameState.screen_time++;
            
            // Update UI
            updateUI();
            updateClickerUI();
        }
        
        // Page navigation
        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            
            // Load page-specific data
            switch(pageId) {
                case 'leaderboard':
                    loadLeaderboard('coins');
                    break;
                case 'profile':
                    updateProfileUI();
                    loadAchievements();
                    break;
                case 'spinning-wheel':
                    updateSpinButton();
                    break;
            }
        }
        
        // Auth functions
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }
        
        async function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            const { data, error } = await supabase.auth.signInWithPassword({
                email: email,
                password: password
            });
            
            if (error) {
                alert('Login failed: ' + error.message);
            } else {
                gameState.user_id = data.user.id;
                await loadGameState();
                showPage('main-menu');
            }
        }
        
        async function register() {
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!username || !email || !password) {
                alert('Please fill all fields');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            const { data, error } = await supabase.auth.signUp({
                email: email,
                password: password,
                options: {
                    data: {
                        username: username
                    }
                }
            });
            
            if (error) {
                alert('Registration failed: ' + error.message);
            } else {
                // Profile will be created automatically by trigger
                alert('Registration successful! Please login.');
                switchAuthTab('login');
            }
        }
        
        async function logout() {
            await supabase.auth.signOut();
            gameState = {
                id: null,
                user_id: null,
                username: '',
                email: '',
                coins: 0,
                axmo: 0,
                total_spins: 0,
                total_pets: 0,
                screen_time: 0,
                bag_capacity: 4,
                pet_level: 1,
                click_multiplier: 1,
                level: 1,
                experience: 0,
                pets: [],
                buffs: [],
                last_spin: null,
                is_logged_in: false
            };
            userInfo.style.display = 'none';
            navLinks.style.display = 'none';
            showPage('auth-page');
        }
        
        // Spinning wheel functions
        function initializeWheel() {
            wheel.innerHTML = '';
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', 
                           '#073B4C', '#EF476F', '#7209B7', '#3A86FF', '#FB5607'];
            
            for (let i = 0; i < 10; i++) {
                const section = document.createElement('div');
                section.className = 'wheel-section-part';
                section.style.backgroundColor = colors[i];
                section.style.transform = `rotate(${i * 36}deg)`;
                section.innerHTML = `<div style="transform: rotate(18deg); font-size: 14px;">${i + 1}</div>`;
                wheel.appendChild(section);
            }
        }
        
        function updateSpinButton() {
            const now = Date.now();
            const lastSpinTime = gameState.last_spin ? new Date(gameState.last_spin).getTime() : 0;
            const timeSinceLastSpin = (now - lastSpinTime) / 1000;
            
            if (timeSinceLastSpin >= spinCooldown) {
                spinButton.disabled = false;
                spinButton.innerHTML = '<i class="fas fa-sync-alt"></i> Spin Wheel (1 Axmo)';
                availableSpins.textContent = Math.max(1, Math.floor(gameState.axmo));
                nextSpinTimer.textContent = '0:00';
            } else {
                spinButton.disabled = true;
                const remaining = spinCooldown - timeSinceLastSpin;
                const minutes = Math.floor(remaining / 60);
                const seconds = Math.floor(remaining % 60);
                nextSpinTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                availableSpins.textContent = '0';
            }
        }
        
        function updateSpinTimer() {
            if (!gameState.last_spin) return;
            
            const now = Date.now();
            const lastSpinTime = new Date(gameState.last_spin).getTime();
            const timeSinceLastSpin = (now - lastSpinTime) / 1000;
            
            if (timeSinceLastSpin < spinCooldown) {
                const remaining = spinCooldown - timeSinceLastSpin;
                const minutes = Math.floor(remaining / 60);
                const seconds = Math.floor(remaining % 60);
                nextSpinTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            } else {
                nextSpinTimer.textContent = '0:00';
                spinButton.disabled = false;
            }
        }
        
        async function spinWheel() {
            if (isSpinning) return;
            
            // Check if enough axmo
            if (gameState.axmo < 1) {
                alert('You need 1 Axmo to spin! (100 coins)');
                return;
            }
            
            // Check cooldown
            const now = Date.now();
            const lastSpinTime = gameState.last_spin ? new Date(gameState.last_spin).getTime() : 0;
            if (now - lastSpinTime < spinCooldown * 1000 && gameState.last_spin) {
                alert('Please wait 5 minutes between spins!');
                return;
            }
            
            // Deduct axmo
            gameState.axmo -= 1;
            gameState.total_spins += 1;
            gameState.last_spin = new Date().toISOString();
            
            isSpinning = true;
            spinButton.disabled = true;
            
            // Select random prize
            const totalProbability = wheelPrizes.reduce((sum, prize) => sum + prize.probability, 0);
            const randomValue = Math.random() * totalProbability;
            let cumulativeProbability = 0;
            let selectedPrize = wheelPrizes[0];
            
            for (const prize of wheelPrizes) {
                cumulativeProbability += prize.probability;
                if (randomValue <= cumulativeProbability) {
                    selectedPrize = prize;
                    break;
                }
            }
            
            // Calculate spin rotation
            const fullRotations = 5;
            const prizeIndex = wheelPrizes.indexOf(selectedPrize);
            const sectionAngle = 36; // 10 sections
            const prizeOffset = (prizeIndex % 10) * sectionAngle;
            const randomOffset = Math.random() * sectionAngle;
            const totalRotation = fullRotations * 360 + prizeOffset + randomOffset;
            
            // Animate wheel
            wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
            wheel.style.transform = `rotate(${totalRotation}deg)`;
            
            // Wait for animation to complete
            setTimeout(async () => {
                // Apply prize
                await applyPrize(selectedPrize);
                
                // Show result
                showResult(selectedPrize);
                
                // Reset wheel
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                    setTimeout(() => {
                        wheel.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
                        isSpinning = false;
                        updateSpinButton();
                        updateUI();
                    }, 50);
                }, 2000);
                
                // Save game state
                await saveGameState();
                
            }, 4000);
        }
        
        async function applyPrize(prize) {
            switch (prize.type) {
                case 'multiplier':
                    // Add buff for 30 minutes
                    const buff = {
                        user_id: gameState.id,
                        type: 'click_multiplier',
                        value: prize.value,
                        expires_at: new Date(Date.now() + 30 * 60 * 1000).toISOString(),
                        description: `${prize.name} for 30 minutes`
                    };
                    
                    gameState.buffs.push(buff);
                    gameState.click_multiplier *= prize.value;
                    
                    // Save buff to database
                    await supabase.from('buffs').insert([buff]);
                    break;
                    
                case 'axmo':
                    gameState.axmo += prize.value;
                    break;
                    
                case 'coins':
                    gameState.coins += prize.value;
                    break;
                    
                case 'pet':
                    if (gameState.pets.length < gameState.bag_capacity) {
                        const petTypes = {
                            'op': { name: 'OP Pet', production: 10 },
                            'normal': { name: 'Normal Pet', production: 1 },
                            'bad': { name: 'Bad Pet', production: 0.5 }
                        };
                        
                        const petType = petTypes[prize.value] || petTypes.normal;
                        const pet = {
                            name: petType.name,
                            type: prize.value,
                            production: petType.production * gameState.pet_level,
                            level: 1
                        };
                        
                        gameState.pets.push(pet);
                        calculateCPS();
                    }
                    break;
                    
                case 'penalty':
                    gameState.click_multiplier *= prize.value;
                    // Penalty lasts 1 minute
                    setTimeout(() => {
                        gameState.click_multiplier /= prize.value;
                    }, 60000);
                    break;
            }
            
            // Save spin history
            await supabase.from('spin_history').insert([{
                user_id: gameState.id,
                prize_type: prize.type,
                prize_name: prize.name,
                prize_value: prize.value.toString(),
                cost_axmo: 1
            }]);
        }
        
        function showResult(prize) {
            const resultTitle = document.getElementById('resultTitle');
            const resultDescription = document.getElementById('resultDescription');
            
            resultTitle.textContent = prize.name;
            
            let description = '';
            switch (prize.type) {
                case 'multiplier':
                    description = `You got ${prize.value}x click multiplier for 30 minutes!`;
                    break;
                case 'axmo':
                    description = `You received ${prize.value} free Axmo!`;
                    break;
                case 'coins':
                    description = `You won ${prize.value} coins!`;
                    break;
                case 'pet':
                    description = `You got a ${prize.name}!`;
                    break;
                case 'penalty':
                    description = `Penalty! Click multiplier reduced to ${prize.value}x for 1 minute.`;
                    break;
                case 'zonk':
                    description = `Zonk! Better luck next time!`;
                    break;
            }
            
            resultDescription.textContent = description;
            showModal('resultModal');
        }
        
        // Clicker game functions
        function clickCoin() {
            gameState.coins += gameState.click_multiplier;
            updateUI();
            
            // Create click effect
            createClickEffect(gameState.click_multiplier);
        }
        
        function createClickEffect(value) {
            const effect = document.createElement('div');
            effect.textContent = `+${value.toFixed(1)}`;
            effect.style.position = 'fixed';
            effect.style.color = 'gold';
            effect.style.fontWeight = 'bold';
            effect.style.fontSize = '20px';
            effect.style.pointerEvents = 'none';
            effect.style.zIndex = '9999';
            effect.style.textShadow = '0 2px 4px rgba(0,0,0,0.5)';
            
            const coin = document.querySelector('.coin');
            const rect = coin.getBoundingClientRect();
            const x = rect.left + rect.width / 2 + (Math.random() * 60 - 30);
            const y = rect.top - 20;
            
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            
            document.body.appendChild(effect);
            
            // Animate
            let opacity = 1;
            let yPos = y;
            const animation = setInterval(() => {
                opacity -= 0.02;
                yPos -= 2;
                effect.style.opacity = opacity;
                effect.style.top = `${yPos}px`;
                
                if (opacity <= 0) {
                    clearInterval(animation);
                    document.body.removeChild(effect);
                }
            }, 16);
        }
        
        function updatePetsGrid() {
            petsGrid.innerHTML = '';
            
            // Show current pets
            gameState.pets.forEach(pet => {
                const petCard = document.createElement('div');
                petCard.className = 'pet-card';
                petCard.style.cursor = 'default';
                
                let icon = 'fa-dog';
                if (pet.type === 'op') icon = 'fa-dragon';
                if (pet.type === 'bad') icon = 'fa-crow';
                
                petCard.innerHTML = `
                    <div class="pet-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <h4>${pet.name}</h4>
                    <p style="color: var(--gray-400); font-size: 0.9rem;">
                        Production: ${pet.production.toFixed(1)} coins/sec
                    </p>
                    <p style="color: var(--gray-400); font-size: 0.9rem;">
                        Level: ${pet.level}
                    </p>
                `;
                petsGrid.appendChild(petCard);
            });
            
            // Add buy pet button if there's space
            if (gameState.pets.length < gameState.bag_capacity) {
                const buyCard = document.createElement('div');
                buyCard.className = 'pet-card';
                buyCard.style.cursor = 'pointer';
                buyCard.onclick = buyPet;
                
                buyCard.innerHTML = `
                    <div class="pet-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h4>Buy New Pet</h4>
                    <p style="color: var(--gray-400); font-size: 0.9rem;">
                        Cost: 10 coins
                    </p>
                    <p style="color: var(--gray-400); font-size: 0.9rem;">
                        Production: ${gameState.pet_level} coins/sec
                    </p>
                    <button class="btn btn-success btn-block">
                        Buy Pet
                    </button>
                `;
                petsGrid.appendChild(buyCard);
            }
        }
        
        async function buyPet() {
            if (gameState.pets.length >= gameState.bag_capacity) {
                alert('Your bag is full! Upgrade your bag first.');
                return;
            }
            
            if (gameState.coins < 10) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= 10;
            
            const pet = {
                name: 'Normal Pet',
                type: 'normal',
                production: 1 * gameState.pet_level,
                level: 1
            };
            
            gameState.pets.push(pet);
            calculateCPS();
            updateUI();
            updateClickerUI();
            await saveGameState();
        }
        
        async function upgradeBag() {
            const cost = 200 * Math.pow(4, Math.log2(gameState.bag_capacity / 4));
            
            if (gameState.coins < cost) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= cost;
            gameState.bag_capacity *= 2;
            
            updateUI();
            updateClickerUI();
            await saveGameState();
        }
        
        async function upgradePets() {
            const cost = 30 * Math.pow(3, gameState.pet_level - 1);
            
            if (gameState.coins < cost) {
                alert('Not enough coins!');
                return;
            }
            
            gameState.coins -= cost;
            gameState.pet_level += 1;
            
            // Update all pets
            gameState.pets.forEach(pet => {
                const baseProduction = pet.type === 'op' ? 10 : pet.type === 'bad' ? 0.5 : 1;
                pet.production = baseProduction * gameState.pet_level;
            });
            
            calculateCPS();
            updateUI();
            updateClickerUI();
            await saveGameState();
        }
        
        // Leaderboard functions
        async function loadLeaderboard(type) {
            // Update active tab
            document.querySelectorAll('.leaderboard-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            let data, error;
            let columnName = '';
            
            switch(type) {
                case 'coins':
                    columnName = 'Coins';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, coins, level')
                        .order('coins', { ascending: false })
                        .limit(20));
                    break;
                case 'axmo':
                    columnName = 'Axmo';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, axmo, level')
                        .order('axmo', { ascending: false })
                        .limit(20));
                    break;
                case 'spins':
                    columnName = 'Spins';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, total_spins as value, level')
                        .order('total_spins', { ascending: false })
                        .limit(20));
                    break;
                case 'pets':
                    columnName = 'Pets';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, total_pets as value, level')
                        .order('total_pets', { ascending: false })
                        .limit(20));
                    break;
                case 'time':
                    columnName = 'Play Time';
                    ({ data, error } = await supabase
                        .from('profiles')
                        .select('username, screen_time as value, level')
                        .order('screen_time', { ascending: false })
                        .limit(20));
                    break;
            }
            
            if (error) {
                console.error('Error loading leaderboard:', error);
                return;
            }
            
            // Update column header
            leaderboardColumn.textContent = columnName;
            
            // Clear table
            leaderboardBody.innerHTML = '';
            
            // Populate table
            data.forEach((item, index) => {
                const row = document.createElement('tr');
                
                let rankClass = '';
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                let value = '';
                switch(type) {
                    case 'coins': value = item.coins.toLocaleString(); break;
                    case 'axmo': value = item.axmo.toLocaleString(); break;
                    case 'spins': 
                    case 'pets': 
                    case 'time': value = item.value.toLocaleString(); break;
                }
                
                row.innerHTML = `
                    <td class="${rankClass}">${index + 1}</td>
                    <td>${item.username}</td>
                    <td class="${rankClass}">${value}</td>
                    <td>${item.level}</td>
                `;
                
                leaderboardBody.appendChild(row);
            });
        }
        
        // Profile functions
        function updateProfileUI() {
            profileName.textContent = gameState.username;
            profileEmail.textContent = gameState.email;
            profileJoinDate.textContent = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            profileCoins.textContent = gameState.coins.toLocaleString();
            profileAxmo.textContent = gameState.axmo.toLocaleString();
            profileSpins.textContent = gameState.total_spins.toLocaleString();
            profilePets.textContent = gameState.total_pets.toLocaleString();
            profileTime.textContent = Math.floor(gameState.screen_time / 3600) + 'h';
            profileLevel.textContent = gameState.level;
            profileAvatar.innerHTML = `<i class="fas fa-user"></i>`;
        }
        
        async function loadAchievements() {
            // For now, just show placeholder achievements
            achievementsList.innerHTML = `
                <div class="achievement-card">
                    <i class="fas fa-coins" style="color: var(--gold); font-size: 2rem;"></i>
                    <h4>First Coin</h4>
                    <p>Earn 100 coins</p>
                </div>
                <div class="achievement-card">
                    <i class="fas fa-sync-alt" style="color: var(--info); font-size: 2rem;"></i>
                    <h4>First Spin</h4>
                    <p>Spin the wheel once</p>
                </div>
                <div class="achievement-card">
                    <i class="fas fa-paw" style="color: var(--success); font-size: 2rem;"></i>
                    <h4>Pet Owner</h4>
                    <p>Buy your first pet</p>
                </div>
            `;
        }
        
        // Chat functions
        async function loadChatMessages() {
            const { data, error } = await supabase
                .from('messages')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(50);
            
            if (!error && data) {
                chatMessages.innerHTML = '';
                data.reverse().forEach(message => {
                    addMessageToChat(message, false);
                });
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        function subscribeToChat() {
            chatSubscription = supabase
                .channel('chat')
                .on('postgres_changes', 
                    { event: 'INSERT', schema: 'public', table: 'messages' }, 
                    (payload) => {
                        addMessageToChat(payload.new);
                    }
                )
                .subscribe();
        }
        
        function addMessageToChat(message, scroll = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            if (message.user_id === gameState.user_id) {
                messageDiv.classList.add('own');
            }
            
            const time = new Date(message.created_at).toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <span>${message.username}</span>
                    <span>${time}</span>
                </div>
                <div class="message-content">${message.content}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            
            if (scroll) {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        async function sendMessage() {
            const content = chatInput.value.trim();
            
            if (!content || !gameState.user_id) return;
            
            const { error } = await supabase
                .from('messages')
                .insert([{
                    user_id: gameState.id,
                    username: gameState.username,
                    content: content
                }]);
            
            if (!error) {
                chatInput.value = '';
            }
        }
        
        function toggleChat() {
            chatContainer.classList.toggle('active');
            if (chatContainer.classList.contains('active')) {
                chatInput.focus();
            }
        }
        
        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Enter key for chat
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
